[phases.setup]
nixPkgs = ["nodejs_20", "pnpm"]

[phases.install]
cmds = [
  "echo \"[install] cwd=$(pwd)\" && ls -a && if [ ! -f pnpm-workspace.yaml ]; then echo 'pnpm-workspace.yaml not found. Execute railway deployment from the repo root (C:/Users/leoro/Documents/Edro.Digital).' && exit 1; fi; pnpm install --frozen-lockfile"
]

[phases.build]
cmds = [
  "echo \"[build] cwd=$(pwd)\" && ls -a && if [ ! -f pnpm-workspace.yaml ]; then echo 'pnpm-workspace.yaml not found. Execute railway deployment from the repo root (C:/Users/leoro/Documents/Edro.Digital).' && exit 1; fi; pnpm run build:packages",
  "pnpm --filter @edro/web run build"
]

[start]
cmd = "pnpm --filter @edro/web run start"

[variables]
COREPACK_ENABLE_DOWNLOAD_SIGN_CHECK = "0"
